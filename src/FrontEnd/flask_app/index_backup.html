<!DOCTYPE html>
<html>
    <head>
        <title>WebSocket demo</title>
    </head>
    <body>

        <img id="video_feed" src="data:image/jpg;base64, ..." alt="foobar" />
        <p id="counter">-1</p>

        <script>
            var ws = new WebSocket("ws://127.0.0.1:5678/")
            var video_feed = document.getElementById("video_feed")
            var counter = document.getElementById("counter")
            var all_counts = []
            ws.onmessage = function (event) {
                var message = JSON.parse(event.data)
                video_feed.setAttribute("src", "data: image/jpg;base64, " + message.img_b64)
                all_counts.push(message.count)
                counter.innerHTML = all_counts
            }
        </script>
    </body>
</html>